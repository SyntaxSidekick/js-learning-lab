<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Question Database Admin</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1a73e8;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }
        textarea {
            min-height: 100px;
            font-family: 'Monaco', 'Courier New', monospace;
        }
        .code-textarea {
            background-color: #1e1e1e;
            color: #d4d4d4;
            min-height: 150px;
        }
        .options-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .option-input {
            margin-bottom: 10px;
        }
        .correct-answer {
            background-color: #e8f5e8;
        }
        button {
            background-color: #1a73e8;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background-color: #1557b2;
        }
        .secondary-btn {
            background-color: #6c757d;
        }
        .secondary-btn:hover {
            background-color: #545b62;
        }
        .output {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 20px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
        }
        .tags-input {
            background: #fff3cd;
            border-color: #ffeaa7;
        }
        .error {
            color: #dc3545;
            background: #f8d7da;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: #155724;
            background: #d4edda;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§  JavaScript Question Database Admin</h1>
        
        <form id="questionForm">
            <div class="form-group">
                <label for="title">Question Title:</label>
                <input type="text" id="title" required placeholder="e.g., Variable Hoisting">
            </div>

            <div class="form-group">
                <label for="category">Category:</label>
                <select id="category" required>
                    <option value="">Select Category</option>
                    <option value="variables">Variables & Data Types</option>
                    <option value="functions">Functions</option>
                    <option value="objects">Objects & Arrays</option>
                    <option value="closures">Closures</option>
                    <option value="promises">Promises & Async</option>
                    <option value="prototypes">Prototypes & Classes</option>
                    <option value="dom">DOM Manipulation</option>
                    <option value="es6">ES6+ Features</option>
                    <option value="operators">Operators & Expressions</option>
                    <option value="loops">Loops & Iteration</option>
                    <option value="strings">Strings & RegEx</option>
                    <option value="error-handling">Error Handling</option>
                    <option value="performance">Performance & Optimization</option>
                    <option value="testing">Testing & Debugging</option>
                    <option value="advanced">Advanced Concepts</option>
                </select>
            </div>

            <div class="form-group">
                <label for="difficulty">Difficulty:</label>
                <select id="difficulty" required>
                    <option value="">Select Difficulty</option>
                    <option value="beginner">Beginner</option>
                    <option value="intermediate">Intermediate</option>
                    <option value="advanced">Advanced</option>
                </select>
            </div>

            <div class="form-group">
                <label for="type">Question Type:</label>
                <select id="type" required>
                    <option value="output">What will be the output?</option>
                    <option value="concept">Concept/Theory Question</option>
                    <option value="debugging">Find the Error</option>
                    <option value="completion">Complete the Code</option>
                </select>
            </div>

            <div class="form-group">
                <label for="question">Question Text:</label>
                <textarea id="question" required placeholder="What will be the output of the following code?"></textarea>
            </div>

            <div class="form-group">
                <label for="code">Code (if applicable):</label>
                <textarea id="code" class="code-textarea" placeholder="console.log('Hello World');"></textarea>
            </div>

            <div class="options-group">
                <label>Answer Options:</label>
                <div class="option-input">
                    <input type="text" id="option0" placeholder="Option A" required>
                    <input type="radio" name="correct" value="0" required> Correct Answer
                </div>
                <div class="option-input">
                    <input type="text" id="option1" placeholder="Option B" required>
                    <input type="radio" name="correct" value="1"> Correct Answer
                </div>
                <div class="option-input">
                    <input type="text" id="option2" placeholder="Option C" required>
                    <input type="radio" name="correct" value="2"> Correct Answer
                </div>
                <div class="option-input">
                    <input type="text" id="option3" placeholder="Option D" required>
                    <input type="radio" name="correct" value="3"> Correct Answer
                </div>
            </div>

            <div class="form-group">
                <label for="explanation">Explanation:</label>
                <textarea id="explanation" required placeholder="Explain why this answer is correct..."></textarea>
            </div>

            <div class="form-group">
                <label for="hints">Hints (comma-separated):</label>
                <input type="text" id="hints" placeholder="Think about hoisting, Consider variable scope" class="tags-input">
            </div>

            <div class="form-group">
                <label for="tags">Tags (comma-separated):</label>
                <input type="text" id="tags" placeholder="hoisting, var, undefined" class="tags-input">
            </div>

            <div class="form-group">
                <label for="relatedConcepts">Related Concepts (comma-separated):</label>
                <input type="text" id="relatedConcepts" placeholder="Variable declarations, Hoisting, Execution context" class="tags-input">
            </div>

            <button type="submit">Generate Question JSON</button>
            <button type="button" class="secondary-btn" onclick="clearForm()">Clear Form</button>
            <button type="button" class="secondary-btn" onclick="loadExample()">Load Example</button>
        </form>

        <div id="output" class="output" style="display: none;"></div>
        <div id="message"></div>
    </div>

    <script>
        let questionId = 41; // Start from 41 since we have 40 questions

        document.getElementById('questionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            generateQuestion();
        });

        function generateQuestion() {
            try {
                const formData = new FormData(document.getElementById('questionForm'));
                
                const question = {
                    id: questionId++,
                    category: formData.get('category') || document.getElementById('category').value,
                    difficulty: formData.get('difficulty') || document.getElementById('difficulty').value,
                    type: formData.get('type') || document.getElementById('type').value,
                    title: document.getElementById('title').value,
                    question: document.getElementById('question').value,
                    code: document.getElementById('code').value,
                    options: [
                        document.getElementById('option0').value,
                        document.getElementById('option1').value,
                        document.getElementById('option2').value,
                        document.getElementById('option3').value
                    ],
                    correctAnswer: parseInt(document.querySelector('input[name="correct"]:checked').value),
                    explanation: document.getElementById('explanation').value,
                    hints: document.getElementById('hints').value.split(',').map(h => h.trim()).filter(h => h),
                    tags: document.getElementById('tags').value.split(',').map(t => t.trim()).filter(t => t),
                    relatedConcepts: document.getElementById('relatedConcepts').value.split(',').map(c => c.trim()).filter(c => c)
                };

                // Validate question
                if (!question.title || !question.category || !question.difficulty || !question.question) {
                    throw new Error('Please fill in all required fields');
                }

                if (question.options.some(opt => !opt.trim())) {
                    throw new Error('Please fill in all answer options');
                }

                if (question.correctAnswer < 0 || question.correctAnswer >= question.options.length) {
                    throw new Error('Please select a correct answer');
                }

                // Display JSON output
                const jsonOutput = JSON.stringify(question, null, 2);
                document.getElementById('output').style.display = 'block';
                document.getElementById('output').textContent = jsonOutput;

                showMessage('Question generated successfully! Copy the JSON above and add it to your questionsDatabase.json file.', 'success');

                // Copy to clipboard
                navigator.clipboard.writeText(jsonOutput).then(() => {
                    showMessage('Question JSON copied to clipboard!', 'success');
                }).catch(() => {
                    showMessage('Question generated! Please copy the JSON manually.', 'success');
                });

            } catch (error) {
                showMessage('Error: ' + error.message, 'error');
            }
        }

        function clearForm() {
            document.getElementById('questionForm').reset();
            document.getElementById('output').style.display = 'none';
            document.getElementById('message').innerHTML = '';
        }

        function loadExample() {
            document.getElementById('title').value = 'Array Reduce Method';
            document.getElementById('category').value = 'loops';
            document.getElementById('difficulty').value = 'intermediate';
            document.getElementById('type').value = 'output';
            document.getElementById('question').value = 'What will be the output of the following code?';
            document.getElementById('code').value = `const numbers = [1, 2, 3, 4];
const sum = numbers.reduce((acc, num) => acc + num, 0);
console.log(sum);`;
            document.getElementById('option0').value = '10';
            document.getElementById('option1').value = '24';
            document.getElementById('option2').value = 'undefined';
            document.getElementById('option3').value = 'NaN';
            document.querySelector('input[name="correct"][value="0"]').checked = true;
            document.getElementById('explanation').value = 'reduce() accumulates values by calling the reducer function for each element. Starting with 0, it adds each number: 0+1+2+3+4 = 10.';
            document.getElementById('hints').value = 'reduce() starts with initial value, The reducer function adds each element';
            document.getElementById('tags').value = 'reduce, array-methods, accumulator';
            document.getElementById('relatedConcepts').value = 'Array reduce, Functional programming, Accumulator pattern';
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.innerHTML = `<div class="${type}">${text}</div>`;
            setTimeout(() => {
                messageDiv.innerHTML = '';
            }, 5000);
        }

        // Update correct answer highlighting
        document.querySelectorAll('input[name="correct"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('.option-input').forEach(div => {
                    div.classList.remove('correct-answer');
                });
                this.closest('.option-input').classList.add('correct-answer');
            });
        });
    </script>
</body>
</html>